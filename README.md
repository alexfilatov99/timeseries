**1. Общее описание**

Веб сервис осуществляет прогнозирование временных рядов. 

У веб-сервиса имеется два метода:

**Метод /TS**

Метод получает на вход временной ряд и возвращает прогноз на 7 дней вперед. Входные и выходные данные передаются в формате JSON cо строго со следующим составом полей:
*  ds - дата
*  y - количество событий на дату


Формат файла:

data_js = { 'ds' : {'index_1' : 'date_1', ... , 'index_N' : 'date_N'},

'y' : {'index_1' : value_1, ... , 'index_N' : value_N}}

Корректная подготовка формата запроса протестирована на стандартной библиотеке JSON

**Пример подготовки данных для запроса**

js = json.dumps(data_js)
В параметрах  запроса необходимо  указывать:
* тип передаваемых данных в поле 'Content-type': 'application/json'
* кол-во прогнозируемух периодов в параметре 'n_period'
* единица измерения периода в параметре 'freq = {'D', 'W', 'Q', 'Y'}'

**Пример запроса**

`headers = {'Content-type': 'application/json', 
				'n_period':'4',
				'freq':'Q'} 

r = requests.post('http://ws4ts:8080/TS', json=js, headers=headers)`

После корректной отработки метод возвращает код 200 и ответ, содержащий прогнозные значения на заданное кол-во периодов вперед. При некорректном завершении возвращается код 400 и сообщение об ошибке.

**Метод /test**

Метод предназначен для тестирования доступности сервиса. В случае корректной работы возвращается код 200 и текст 'Hello'. В случае недоступности сервиса возвращается код 404. 

**2. Общая архитектура решения**

Веб-сервис реализован на Flask. Данные передаются сервису методом POST в формате json на порт 8080, которые конвертируется в датафрейм pandas. Датафрейм передается в функцию на библиотеке Prophet 
для анализа и прогноза временного ряда. Полученный датафрейм переводится  json формат, который передается в качестве выходных данных.

**3. Адрес сервиса**

ws4ts...mos.ru:8080

**4. Содержимое**

ws4ts.py - скрипт на языке python-3.6


**5. Библиотеки**

fbprophet-0.4

flask-1.0.3

pandas-0.24.2

logging-0.5.1.2


**6. Запуск сервиса**

Запуск осуществляется стандартной командой python ws4ts.py